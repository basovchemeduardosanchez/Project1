<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>The Backpacker Assistant!</title>
    
        <!-- * Google Fonts Import -->
        <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
        <!-- * Bulma Import -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
        <!-- * MapQuest Stylesheet Import -->
        <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css">
    
        <style>
            /* SECTION Header animation */
            @keyframes headerFadeIn{
                0% {
                    transform: translateX(-40px);
                    opacity: 0;
                }
                100% {
                    transform: none;
                    opacity: 1;
                }
            }
            .h1 {
                margin-bottom: 0px;
                text-align: center;
                transform: translateX(-40px);
                opacity: 0;
                animation: headerFadeIn 0.7s;
                animation-fill-mode: forwards;
                animation-play-state: running;
            }
            h1:nth-child(2){
                animation-delay:0.7s;
            }
            /* !SECTION Header Animation */

            body {
                font-family: 'Anton', sans-serif;
                background-color: rgb(157, 219, 219);
                min-height: 100vh;
                background: radial-gradient(ellipse at bottom,#3d0155 0%, rgb(46, 1, 22) 100%);
            }
            .container{
                padding-top: 0px;
                text-align: center;
            }
            #column{
                background-color: rgb(229, 240, 198);
                color: rgb(24, 10, 104);
                padding-bottom: 50px;
                width: 400px;
                text-align: center;
            }
            .block{
                color: rgb(8, 6, 100);
                background-color: rgb(1, 150, 76);
            }
            #recomendations{
                text-align: center;
            }
        
            .subtitle{
                text-align: center;
                padding-top: 20px;
            
            }
            .carousel {
                overflow: auto;
            }
            .carousel-item {
                float: left;
            }
            .footer {
                text-align: center;
                padding: 0px;
                background-color: rgba(128, 128, 128, 0.247);
                color: white;
                margin: 0px;
            }
        </style>
        <style>
            /* SECTION Nested dropdown styles */
            .nested.dropdown:hover > .dropdown-menu {
                display: block;
            }
            .nested.dropdown .dropdown-menu {
                top: -15px;
                margin-left: 100%;
            }
            /*
            !! Removing the caret from the styles
            .nested.dropdown .dropdown-trigger button::after {
                content: "â¦ ";
            }
            */    
            .nested.dropdown .dropdown-trigger button {
                padding: 0px 0px;
                border: 0px;
                font-size: 14px;
                font-weight: 400;
                height: 2em;
            }
            /* !SECTION Nested dropdown styles */
        </style>
    </head>
    <body class="body">
        <div class="container">
            <!-- SECTION Navigation -->
            <nav class="navbar is-success" role="navigation" aria-label="main navigation" style="padding: 0px 50px;">
                <div class="navbar-brand" style="margin-left: 0;">
                    <a class="navbar-item" href="#">
                        <!-- TODO: Change for a FontAwesome Icon -->
                        <i class="fa fa-map-marker"></i>
                    </a>
                    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                <div id="navbarBasicExample" class="navbar-menu">
                    <div class="navbar-start">
                        <a class="navbar-item">
                            HOMEPAGE
                        </a>
                        <div class="navbar-item has-dropdown is-hoverable">
                            <a class="navbar-link">
                                More
                            </a>
                            <div class="navbar-dropdown">
                                <a href="http://www.ebizmba.com/articles/travel-websites" class="navbar-item">
                                    COMPARISON SITES BLOGS
                                </a>
                                <a href="https://alanxelmundo.com/" class="navbar-item">
                                    MEET NEW TRAVEL BLOGERS
                                </a>
                                <hr class="navbar-divider">
                                <a href="https://www.forbes.com/sites/christopherelliott/2018/08/18/the-best-and-worst-travel-insurance-companies/#43efd78b4fc2" class="navbar-item">
                                    INSURANCE AGENCIES RANKING
                                </a>
                                <a class="navbar-item">
                                    ABOUT US
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- !SECTION Navigation Bar -->

            <!-- SECTION Hero -->
            <div class="hero is-primary" style="padding-top: 40px;">
                <h1 class="title is-1 h1">
                    WELCOME TO THE <strong>BACKPACKER ASSISTANT</strong>!
                </h1>
                <h1 class="subtitle is-4">CREATED JUST FOR YOU!</h1>
                <br>
                <!-- SECTION Pictures -->
                <div id="countrypics"></div>
                <!-- !SECTION Pictures -->
            </div>
            <div class="block" style="overflow: hidden;">
                <div class="columns">
                    <!-- SECTION Country Data -->
                    <div class="column">
                        <!-- TODO: Should this be part of the hero? -->
                        <div class="hero-body">
                            <!-- TODO: Make this part of the CSS -->
                            <!-- ADDED COLOR AND SIZE TO THE H1 -->
                            <h1 style="color:rgb(241, 241, 241);" class= "subtitle is-2">SEARCH YOUR COUNTRY INFORMATION HERE</h1>
                            <input id="countryname">
                            <button id="countrySearchBtn">Search Now</button>
                            <h2 id="country"></h2>
                            <h3 id="capital"></h3>
                            <h3 id="language"></h3>
                            <h3 id="currency"></h3>
                            <h3 id="population"></h3>
                            <img id="flag">
                        </div>
                    </div>
                    <!-- !SECTION Country Data -->
                    <!-- SECTION Country City Data -->
                    <div id="column">
                        <div class="card"></div>
                        <!-- TODO: Should this be inside the card -->
                        <div class="card-content" id="cityinfo">TOP 5 CITIES IN THIS COUNTRY</div>
                        <!-- TODO: Should this be inside of the card content -->
                        <h2 id="cityinfolist"></h2>
                        <h3 id="city1"></h3>
                        <h4 id="city1info"></h4>
                        <h3 id="city2"></h3>
                        <h4 id="city2info"></h4>
                        <h3 id="city3"></h3>
                        <h4 id="city3info"></h4>
                        <h3 id="city4"></h3>
                        <h4 id="city4info"></h4>
                        <h3 id="city5"></h3>
                        <h4 id="city5info"></h4>
                        <input id="citySearch"></input>
                        <button id="citySearchBtn">City Search</button>
                    </div>
                    <!-- !SECTION Country City Data -->
                </div>
            </div>
            <!-- !SECTION Hero -->

            <!-- SECTION Map Rendering -->
            <div id="map"></div>
            <!-- !SECTION Map Rendering -->

            <h2 style="color:rgb(241, 241, 241);">ALL THE INFO YOU NEED</h2>
            <p style="color:rgb(241, 241, 241);">Choose a category to find more information</p>

            <!-- Dropdown Menu Bulma --> 
            <!-- TODO: Make this an ID and move styles to CSS -->
            <div style="max-width: 200px; margin: auto;">
                <div class="navbar-item has-dropdown is-hoverable" style="justify-content:center;">
                    <a class="navbar-link" style="background-color: white;">
                        Options
                    </a>
                    <div class="navbar-dropdown">
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Character</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <!-- Character -->
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="character-Gay_friendly">
                                        Gay Friendly
                                    </a>
                                    <a class="dropdown-item" id="character-Kid_friendly">
                                        Kid Friendly        
                                    </a>
                                    <a href="#" class="dropdown-item" id="character-Popular_with_locals">
                                        Popular with locals
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- To Do  -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>To Do</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="beaches">
                                        Beaches
                                    </a>
                                    <a class="dropdown-item" id="shopping">  
                                        Shopping
                                    </a>
                                    <a href="#" class="dropdown-item" id="sports">
                                        Sports
                                    </a>
                                    <a href="#" class="dropdown-item" id="wellness">
                                        Wellness
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Food and Drink  -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Food and Drink</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <!-- Food and Drink  -->
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="eatingout_establishment.breweries">
                                        Breweries
                                    </a>
                                    <a class="dropdown-item" id="distilleries">
                                        Distilleries
                                    </a>
                                    <a href="#" class="dropdown-item" id="bakery">
                                        Bakery
                                    </a>
                                    <a href="#" class="dropdown-item" id="bar">
                                        Bar
                                    </a>
                                    <a href="#" class="dropdown-item" id="restaurant">
                                        Restaurant
                                    </a>
                                    <a href="#" class="dropdown-item" id="cafe">
                                        Cafe
                                    </a>
                                    <a href="#" class="dropdown-item" id="wineries">
                                        Wineries
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Accomodation  -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Accomodation</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <!-- Nightlife  -->
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="cinema">
                                        Cinema
                                    </a>
                                    <a class="dropdown-item" id="drinks">
                                        Drinks
                                    </a>
                                    <a href="#" class="dropdown-item" id="dancing">
                                        Dancing
                                    </a>
                                    <a href="#" class="dropdown-item" id="redlight">
                                        Adults Only
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Practicalities  -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Essentials</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <!-- Practicalities  -->
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="groceries">
                                        Groceries
                                    </a>
                                    <a class="dropdown-item" id="health">
                                        Health
                                    </a>
                                    <a href="#" class="dropdown-item" id="money">
                                        Money
                                    </a>
                                    <a href="#" class="dropdown-item" id="safety">
                                        Safety
                                    </a>
                                    <a href="#" class="dropdown-item" id="touristinfo">
                                        Tourist Info
                                    </a>
                                    <a href="#" class="dropdown-item" id="transport">
                                        Transport
                                    </a>
                                    <a href="#" class="dropdown-item" id="visas">
                                        Visas
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Sightseeing -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Sightseeing</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="sightseeing">
                                        All
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Tours -->
                        <div class="nested navbar-item dropdown">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
                                    <span>Tours</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <div class="dropdown-menu" id="dropdown-menu" role="menu">
                                <div class="dropdown-content" >
                                    <a href="#" class="dropdown-item" id="tours">
                                        All
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION Individual City Information -->
            <h1 style="color:rgb(241, 241, 241);" id="recomendations">HERE YOU GO!</h1>
            <div id="local" style="float: inline-end; background-color: rgb(193, 230, 230);">
                <h2 id="localinfo"></h2>
            </div>
            <!-- !SECTION Individual City Information -->

            <div class="block">
                <h1 style="color:rgb(241, 241, 241);" class="subtitle is-1">MUSTS FOR A BACKPACKER</h1>
                <div class="columns" style="margin: 0;">
                    <div class="column">
                        <div class="card">
                            <div class="card-content"> <h2 class="title">COMPARISON SITES</h2>
                                <p>Here is a list of the TOP 5 comparison sites for backpackers</p>
                                <div class="content">
                                    <ol type="A">
                                        <li id="skyscanner"><a href="https://www.skyscanner.com">SKYSCANNER</a></li>
                                        <li id="kayak"><a href="https://www.kayak.com">KAYAK</a></li>
                                        <li id="edreams"><a href="https://www.edreams.com">EDREAMS</a></li>
                                        <li id="despegar"><a href="https://www.despegar.com">DESPEGAR</a></li>
                                        <li id="momondo"><a href="https://www.momondo.com">MOMONDO</a></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-content"> <h2 class="title">WHERE TO STAY</h2>
                                <p>Here is a list of the TOP 3 accomodation sites for backpackers</p>
                                <div class="content">
                                    <ol type="A">
                                        <li id="airbnb"><a href="https://www.airbnb.mx/">AIRBNB</a></li>
                                        <li id="HostelWorld"><a href="https://www.hostelworld.com">HOSTEL WORLD</a></li>
                                        <li id="CouchSurfing"><a href="https://www.couchsurfing.com/">COUCH SURFING</a></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-content"> <h2 class="title">INSURANCE AGENCIES</h2>
                                <p>Here is a list of the TOP 5 insurance agencies for backpackers</p>
                                <div class="content">
                                    <ol type="A">
                                    <li id="AllianzGlobalAssistance"><a href="https://www.allianz-assistance.com.mx">Allianz Global Assistance</a></li>
                                    <li id="Amex Assurance"><a href="https://aeti.americanexpress.com/travel-insurance/home.do?inav=menu_travel_protection">Amex Assurance</a></li>
                                    <li id="Generali Global Assistance"><a href="https://www.generalitravelinsurance.com/">Generali Global Assistance</a></li>
                                    <li id="Seven Corners"><a href="https://www.sevencorners.com/">Seven Corners</a></li>
                                    <li id="Travelex"><a href="https://www.travelex.com/">Travelex</a></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </div>

            <div class='carousel carousel-animated carousel-animate-slide'>
                <div class='carousel-container'>
                    <div class='carousel-item has-background is-active'>
                        <img class="is-background" src="https://theplanetd.com/images/adventure-travel-quotes-daring-418x627.jpg"
                            alt="" width="231" height="100" />
                    </div>
                    <div class='carousel-item has-background'>
                        <img class="is-background" src="https://theplanetd.com/images/quotes-for-travelers-footprints-418x627.jpg"
                            alt="" width="220" height="100" />
                        <div class="title"> <a href="https://lasongbox.com" target="_blank"></a></div>
                    </div>
                    <div class='carousel-item has-background'>
                        <img class="is-background"
                            src="https://theplanetd.com/images/Best-Travel-Quotes-travel-makes-one-modest-418x627.jpg" alt=""
                            width="220" height="100" />
                    </div>
                    <div class='carousel-item has-background'>
                        <img class="is-background"
                            src="https://theplanetd.com/images/inspirational-travel-quotes-saint-augustine-418x627.jpg" alt=""
                            width="220" height="100" />
                    </div>
                    <div class='carousel-item has-background'>
                        <img class="is-background" src="https://theplanetd.com/images/best-travel-quotes-jrr-tolkein-418x627.jpg"
                            alt="" width="231" height="100" />
                    </div>
                </div>
            </div>
            <div class="footer">
                <footer>
                    <p>THE BACKPACKER ASSISTANT.INC</p>
                    <p>Copyright Â© BACKPACKERASSISTANT 2020
                    </p>
                </footer>
            </div>
        </div>

        <!-- * FontAwesome Import -->
        <script defer="" src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
        <!-- * jQuery Import -->
        <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
        <!-- * MapQuest SDK -->
        <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js"></script>    
        <!-- * MapQuest GeoCoding Functions -->
        <script src="js/MapQuest.js"></script>
        <!-- * MapQuest Invocation -->
        <script type="text/javascript">
            // Eduardo's additions
            MapQuest.apiKey= "eM39yPb4tOGGelWAM4iuzTpK5S8d2Ike";
            function refreshMap(pCountry,pCity){


                // This line call the function that is defined inside the library "js/MapQuest.js"
                // The files usually have the same name as the variables to prevent looking for 
                // hours the name of a variable
                MapQuest.getAddressCoordinates( pCity + ", " + pCountry, function(pResponse){
                    L.mapquest.key = MapQuest.apiKey;
                    // We create an element to put the map
                    var lMapElement$ = $('<div id="map" style="width: 100%; height: 530px;"></div>')
                    // We replace the element that is in teh DOM by the element we just have created above
                    $( '#map' ).replaceWith( lMapElement$ );
                        var map = L.mapquest.map('map', {      
                            // * We retrieve the data from the response and send is as a parameter
                            // of the geolocation to mapquest.js
                            center: [pResponse.lat, pResponse.lng],
                            layers: L.mapquest.tileLayer('map'),
                            zoom: 12
                        });
                        map.addControl(L.mapquest.control());
                });
            }
        </script>
        <script type="text/javascript">
            // ADDED COLOR AND FONT SIZE TO THE BUTTON   <button id="countrySearchBtn">Search Now</button> //
            var allbuttonsTags = document.querySelectorAll( "button" );
            /* TODO: Do this in the CSS */
            allbuttonsTags[0].setAttribute( "style", "background-color:white; color:dark-blue; font-size:15px" ); 

            // SECTION Dropdown functionality
            $(document).ready(function(){
                $('.dropdown').on('click', function( pEvent ){
                    pEvent.preventDefault();
                    $( this ).toggleClass("is-active"); 
                });
                $('.dropdown a.test').on("click", function (e) {
                    $(this).next('ul').toggle();
                    e.stopPropagation();
                    e.preventDefault();
                });
            });
            // !SECTION Dropdown functionality

            // SECTION Sub-dropdown
            $(document).ready(function(){
                $('.dropdown-submenu a.test').on("click", function (e) {
                    $(this).next('ul').toggle();
                    e.stopPropagation();
                    e.preventDefault();
                });
            });
            // !SECTION Sub-dropdown

            // SECTION Country Capital Pictures
            var UnsplashSource = {
                getImageUrl: function( pSize, pKeywords ){
                    // Generate a URL for Unsplash Source using the size
                    lImageURL = 'https://source.unsplash.com/' + encodeURIComponent( pSize )  + '/?';
                    // Traverse the keywords array and add them separated by comma to the URL
                    for ( var i = 0; i < pKeywords.length; i++ ){
                        // If this this is not the first keyword then add a comma
                        if ( i > 0 ){
                            lImageURL = lImageURL + ',';
                        }

                        // Add the keyword URL encoded for t not to cause problems if it has
                        // special characters
                        lImageURL = lImageURL + encodeURIComponent( pKeywords[ i ] );
                    };

                    // !! I found that when you use multiple images with
                    // !! Unsplash Source you end up getting the same image
                    // !! multiple times, I looked over the internet and found
                    // !! the following link: 
                    // !! https://github.com/unsplash/unsplash-source-js/issues/9
                    // !! According to it the reason is that the browser caches
                    // !! the request and it retrieves the files from the
                    // !! browser cache. The comments in there recommends to add
                    // !! a random number to the URL as `?sip=<RANDOM>` to get
                    // !! rid of this error
                    lImageURL = lImageURL + '&sip=' + encodeURIComponent( Math.random() );

                    console.log( lImageURL );

                    return lImageURL;
                },
                createImage: function( pSize, pKeywords ){
                    // Create a jQuery image element
                    return $( '<img>' )
                        // Add the first keyword to the alt attribute for accessibility
                        .attr( 'alt', pKeywords[ 0 ] )
                        // Add the generated URL as the src
                        .attr( 'src', this.getImageUrl( pSize, pKeywords ) );
                }
            };
            // !SECTION Country Capital Pictures

            var lCountry ;
            function capitalize_Words(str){
                return str.replace(
                    /\w\S*/g,
                    function(txt){
                        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
                    }
                );
            }

            // SECTION Country Search
            $( document ).ready( function(){
                $( "#countrySearchBtn" )
                    .on( "click", function( pEvent ){
                        var countryInput = $("#countryname").val();
                            // lCountry = countryInput[0].toUpperCase() + countryInput.slice(1); //Capitalises the first letter
                            lCountry = capitalize_Words(countryInput)
                        //$( "#countryname" ).val();
                        var lQueryURL = "https://restcountries.eu/rest/v2/name/" + lCountry;
                        var lNumberOfImages = 3;

                        $.ajax({
                            url: lQueryURL,
                            method: "GET"
                        })
                            .then( function( pResponse ) {
                                //Gives basic info on country
                                $( "#country" )
                                    .text( "Country: " + pResponse[0].name );
                                $("#capital")
                                    .text( "Capital: " + pResponse[0].capital );
                                $( "#language" )
                                    .text(
                                        "Official Language Spoken: "
                                            + pResponse[0].languages[0].name
                                    );
                                $( "#currency" )
                                    .text(
                                        "Currency: " + pResponse[0].currencies[0].name + " " 
                                            + pResponse[0].currencies[0].symbol + " " 
                                            + pResponse[0].currencies[0].code
                                    );
                                $( "#population" )
                                    .text( "Population: " +  pResponse[0].population );
                                $( "#flag" )
                                    .attr( "src", pResponse[0].flag );
                                $( "#flag" )
                                    .css( {
                                        height: '60px',
                                        width: '60px'
                                    } );

                                $( '#countrypics' )
                                    .empty();
                                for ( var i = 0; i < lNumberOfImages; i++ ){
                                    $( '#countrypics' )
                                        .append(
                                            UnsplashSource.createImage( '80x60', [ pResponse[0].name, pResponse[0].capital, 'landmark' ] )
                                        )
                                }
                                refreshMap(pResponse[0].name,pResponse[0].capital);
                                //Kyle's addtions
                                var queryURL2 = "https://www.triposo.com/api/20200405/location.json?part_of=" + lCountry.replace(" ", "_") + "&tag_labels=city&count=10&fields=id,name,score,snippet&order_by=-score&account=EBIJUYBE&token=x12w6bi7kpp880qub7zb7ud5wdsnojzz"

                                $.ajax({
                                    url: queryURL2,
                                    method: "GET"
                                }).then(function(response) {

                                    $("#cityinfolist").text("Top 5 cities in " + lCountry)
                                    $("#city1").text(response.results[0].name)
                                    $("#city1info").text(response.results[0].snippet)

                                    $("#city2").text(response.results[1].name)
                                    $("#city2info").text(response.results[1].snippet)

                                    $("#city3").text(response.results[2].name)
                                    $("#city3info").text(response.results[2].snippet)

                                    $("#city4").text(response.results[3].name)
                                    $("#city4info").text(response.results[3].snippet)

                                    $("#city5").text(response.results[4].name)
                                    $("#city5info").text(response.results[4].snippet)
                                });
                            });
                    });

                    $( "#citySearchBtn" ).on( 'click', function(){
                        refreshMap( lCountry, $( '#citySearch' ).val() );
                    } );

                    $(".dropdown-menu a[id]").on("click", function(){
                        getTag($(this).attr("id"),lCountry);
                    });

                    $(".dropdown-submenu a[id]").on("click", function(){
                        getTag($(this).attr("id"),lCountry);
                    })

                    function getTag(option, lCountry){
                        console.log(option);
                            
                        var cityInput = $("#citySearch").val();
                        var city = capitalize_Words(cityInput)
                                    
                        var queryURL3 = "https://www.triposo.com/api/20200405/poi.json?location_id=" + city.replace(" ", "_") + "&tag_labels=" + option +"&order_by=-score&fields=id,name,snippet&account=EBIJUYBE&token=x12w6bi7kpp880qub7zb7ud5wdsnojzz"
                
                        $.ajax({
                            url: queryURL3,
                            method: "GET"
                        }).then(function(response) {
                            if(response.more == false && response.results == 0){
                                //Extends search for cities that are not found
                                $("#localinfo").text("Sorry, we could not find the information that matched your search. We hope you are able to find more info via the following links: " );
                            }

                            $("#localinfo").text("Enjoy these top spots based on your search entry and check the links below for more info on your chosen city!")
            
                            response.results.forEach(name => {                   
                                var gem = $("<li>").text("Name :" + name.name)
                                var geminfo = $("<p>").text("Info :" + name.snippet)


                                $("#localinfo").append(gem)
                                gem.append(geminfo)
                            })

                            //If country has not been entered
                            if($("#countryname").val().trim() === ""){
                                var youtube = $("<img>").attr({
                                    src: "https://www.youtube.com/yts/img/yt_1200-vflhSIVnY.png",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.youtube.com/results?search_query=" + encodeURIComponent(city + " to do")
                                }).appendTo($("#localinfo")))
                        
                                var tripadvisor = $("<img>").attr({
                                    src: "https://skift.com/wp-content/uploads/2017/06/tripadvisor-logo-e1526649519797.png",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.tripadvisor.com/Search?q=" + encodeURIComponent(city)
                                }).appendTo($("#localinfo")))
                        
                                var lonelyplanet = $("<img>").attr({
                                    src: "http://2.bp.blogspot.com/--kwdxC9doQE/ULUS6jOviFI/AAAAAAAADFQ/RjFr5BbAAV8/s1600/20121126-172448-lonelyplanet.jpeg",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.lonelyplanet.com/search?q=" + encodeURIComponent(city)
                                }).appendTo($("#localinfo")))
                            } else {
                                var youtube = $("<img>").attr({
                                    src: "https://www.youtube.com/yts/img/yt_1200-vflhSIVnY.png",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.youtube.com/results?search_query=" + encodeURIComponent(city + " " + lCountry + " to do")
                                }).appendTo($("#localinfo")))
                        
                                var tripadvisor = $("<img>").attr({
                                    src: "https://skift.com/wp-content/uploads/2017/06/tripadvisor-logo-e1526649519797.png",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.tripadvisor.com/Search?q=" + encodeURIComponent(city + " " + lCountry )
                                }).appendTo($("#localinfo")))
                        
                                var lonelyplanet = $("<img>").attr({
                                    src: "http://2.bp.blogspot.com/--kwdxC9doQE/ULUS6jOviFI/AAAAAAAADFQ/RjFr5BbAAV8/s1600/20121126-172448-lonelyplanet.jpeg",
                                    width : "100px",
                                    height: "100px"
                                }).appendTo($("<a>").attr({
                                    href:"https://www.lonelyplanet.com/search?q=" + encodeURIComponent(city + " " + lCountry )
                                }).appendTo($("#localinfo")))
                            }
                        });
                    }
            });
            // !SECTION Country Search
        </script>
    </body>
</html>